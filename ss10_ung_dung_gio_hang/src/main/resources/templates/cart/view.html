<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Gi·ªè h√†ng</title>
  <th:block th:replace="~{common/template::library}"></th:block>
</head>
<body>
<div th:replace="~{common/template::header}"></div>

<div class="container mt-5">
  <h2 class="text-center mb-4">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h2>


  <div th:if="${#lists.isEmpty(cart.items)}" class="alert alert-info text-center">
    Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng. <a href="/products" class="alert-link">Ti·∫øp t·ª•c mua h√†ng</a>
  </div>


  <div th:if="${!#lists.isEmpty(cart.items)}">
    <table class="table table-bordered table-hover align-middle text-center">
      <thead class="table-light">
      <tr>
        <th>T√™n s·∫£n ph·∫©m</th>
        <th width="150">S·ªë l∆∞·ª£ng</th>
        <th>Gi√°</th>
        <th>T·ªïng</th>
        <th>H√†nh ƒë·ªông</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="item : ${cart.items}">
        <td class="text-start fw-bold" th:text="${item.product.name}"></td>
        <td>
          <form th:action="@{/cart/update/{id}(id=${item.product.id})}" method="post" class="d-flex justify-content-center">
            <input type="number" name="quantity" th:value="${item.quantity}" min="1"
                   class="form-control form-control-sm w-50 text-center me-2"/>
            <button type="submit" class="btn btn-sm btn-outline-primary">C·∫≠p nh·∫≠t</button>
          </form>
        </td>
        <td class="text-danger fw-bold"
            th:text="${#numbers.formatInteger(item.product.price, 0, 'POINT')} + ' VND'"></td>
        <td class="fw-bold"
            th:text="${#numbers.formatInteger(item.product.price * item.quantity, 0, 'POINT')} + ' VND'"></td>
        <td>
          <a th:href="@{/cart/remove/{id}(id=${item.product.id})}"
             class="btn btn-sm btn-outline-danger">
            X√≥a
          </a>
        </td>
      </tr>
      </tbody>
    </table>


    <div class="d-flex justify-content-between align-items-center mt-4">
      <div>
        <h5>T·ªïng s·ªë l∆∞·ª£ng: <span class="fw-bold" th:text="${totalQuantity}"></span></h5>
        <h4 class="text-danger">T·ªïng ti·ªÅn: <span th:text="${#numbers.formatInteger(totalPrice, 0, 'POINT')}"></span> VND</h4>
      </div>
      <div>
        <a href="/products" class="btn btn-secondary me-2">‚Üê Ti·∫øp t·ª•c mua h√†ng</a>
      </div>
    </div>
  </div>
</div>

</body>
</html>
